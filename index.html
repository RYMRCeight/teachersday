<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Dearest Reyshien ❤️</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- NEW: Load Tone.js for dynamic music -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        /* Custom CSS for a beautiful pink aesthetic and font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce4ec; /* Very light pink background */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.5s ease;
            position: relative; /* Needed for confetti container */
        }

        .heart-icon {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .surprise-button {
            transition: all 0.2s ease;
            box-shadow: 0 10px 20px rgba(236, 64, 122, 0.4);
        }

        .surprise-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(236, 64, 122, 0.6);
        }

        /* Subtle animation for the main greeting card */
        .greeting-card-appear {
            animation: fadeInScale 0.8s ease-out forwards;
        }

        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* Styles for the static floating decorative elements on the card */
        .flower-float {
            position: absolute;
            animation: float 5s ease-in-out infinite;
            z-index: 5; 
        }

        .flower-float.one { top: 5%; left: -10px; animation-duration: 6s; }
        .flower-float.two { bottom: 10%; right: -20px; animation-delay: 1s; animation-duration: 7s; }
        .flower-float.three { top: 70%; left: -30px; animation-delay: 3s; animation-duration: 5.5s; }
        .flower-float.four { top: 15%; right: -15px; animation-delay: 2s; animation-duration: 6.5s; }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
            50% { transform: translateY(-15px) rotate(5deg); opacity: 1; }
            100% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
        }
        
        .animate-spin-slow {
            animation: spin 8s linear infinite;
        }

        /* Styles for the Confetti/Flower Burst effect */
        #confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows clicks to pass through */
            overflow: hidden;
            z-index: 20; /* High z-index to be on top of everything */
        }

        .confetti-piece {
            position: absolute;
            opacity: 0;
            animation: fall linear infinite; /* CHANGED: Added 'infinite' for nonstop loop */
            line-height: 1; /* Fix for icon size */
        }

        @keyframes fall {
            /* Start with opacity 1 to ensure pieces are visible when the loop resets */
            0% { transform: translate(var(--x), var(--y)) rotate(0deg); opacity: 1; } 
            /* Fall far below the screen, then instantly restart due to 'infinite' */
            100% { transform: translate(var(--x-end), 150vh) rotate(720deg); opacity: 1; } 
        }
    </style>
</head>
<body class="p-4">

    <!-- Confetti Layer (Full Screen) -->
    <div id="confetti-container"></div>

    <div id="app-container" class="w-full max-w-lg mx-auto relative z-10">
        
        <!-- ENTRANCE SCREEN (The Surprise Gate) -->
        <div id="entrance-screen" class="flex flex-col items-center justify-center p-8 bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl border-4 border-pink-300">
            <div class="text-6xl mb-4 text-pink-500 heart-icon">
                <i data-lucide="heart" class="w-16 h-16 inline-block"></i>
            </div>
            <h1 class="font-['Playfair_Display'] text-4xl sm:text-5xl font-extrabold text-pink-700 mb-6 text-center">
                A Lovely Surprise Awaits...
            </h1>
            <p class="text-lg text-pink-600 mb-8 text-center font-medium">
                Please click the button below, my dearest.
            </p>
            
            <button onclick="showGreeting()" class="surprise-button px-10 py-4 text-xl font-bold rounded-full bg-gradient-to-r from-pink-500 to-rose-500 text-white hover:from-pink-600 hover:to-rose-600 focus:outline-none focus:ring-4 focus:ring-pink-300 transition duration-300">
                <i data-lucide="sparkles" class="w-5 h-5 inline-block mr-2"></i>
                Enter Now
            </button>
        </div>

        <!-- MAIN GREETING SCREEN (Hidden Initially) -->
        <div id="greeting-screen" class="hidden relative greeting-card-appear p-10 pt-16 pb-16 bg-pink-50/70 rounded-3xl shadow-2xl border-4 border-pink-400 overflow-hidden">
            
            <!-- Static Floating Decorative Elements (Flowers/Hearts relative to card) -->
            <div class="flower-float one text-rose-300">
                <i data-lucide="flower" class="w-8 h-8 opacity-70"></i>
            </div>
            <div class="flower-float two text-pink-300">
                <i data-lucide="heart" class="w-10 h-10 opacity-70"></i>
            </div>
            <div class="flower-float three text-rose-400">
                <i data-lucide="sparkles" class="w-6 h-6 opacity-80"></i>
            </div>
            <div class="flower-float four text-pink-400">
                <i data-lucide="flower" class="w-12 h-12 opacity-60"></i>
            </div>

            <div class="flex flex-col items-center relative z-10">
                <div class="text-7xl mb-6 text-rose-500 animate-bounce">
                    <i data-lucide="book-open-text" class="w-16 h-16 inline-block"></i>
                </div>
                <h2 class="font-['Playfair_Display'] text-4xl sm:text-5xl font-extrabold text-pink-800 mb-6 text-center leading-tight">
                    Happy Teacher's Day, My Love!
                </h2>
                
                <p class="text-xl text-gray-700 mt-4 mb-6 leading-relaxed text-center font-medium">
                    To my dearest Reyshien, on Teacher's Day, I celebrate not just the amazing educator you are to your students, but the incredible teacher you are in my life.
                </p>

                <p class="text-xl text-pink-700 mb-8 leading-relaxed text-center italic border-t border-b border-rose-200 py-4 max-w-sm">
                    You teach me patience, kindness, and how to see the beauty in every little thing. Thank you for being my anchor, my inspiration, and my greatest love. Every day with you is a lovely lesson in happiness.
                </p>

                <div class="text-5xl text-rose-500 mb-8">
                    <i data-lucide="heart-handshake" class="w-12 h-12 inline-block mx-2"></i>
                    <i data-lucide="sparkles" class="w-10 h-10 inline-block mx-2 animate-spin-slow"></i>
                    <i data-lucide="heart" class="w-12 h-12 inline-block mx-2"></i>
                </div>

                <p class="text-2xl font-semibold text-pink-700 mt-4">
                    With all my love,
                </p>
                <p class="text-2xl font-extrabold text-rose-600">
                    Reymarc
                </p>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons on page load
        lucide.createIcons();
        
        // Function to play a looping romantic musical phrase for 16 seconds
        function playSurpriseMusic() {
            // Tone.js requires starting the audio context on user interaction
            if (Tone.context.state !== 'running') {
                Tone.start().catch(e => console.error("Tone.js failed to start:", e));
            }

            // Set the tempo (120 BPM means 2 beats per second)
            Tone.Transport.bpm.value = 120; 

            // Create effects (Reverb for atmosphere)
            const reverb = new Tone.Reverb({
                decay: 3,
                preDelay: 0.05
            }).toDestination();
            reverb.wet.value = 0.3; // 30% wet signal

            // Create a soft, sustained sine-wave synth for a music box/piano feel
            const synth = new Tone.PolySynth(Tone.Synth, {
                oscillator: { type: "sine" },
                envelope: {
                    attack: 0.5, // Soft attack
                    decay: 0.8,
                    sustain: 0.7,
                    release: 1.5 // Long release for echo
                },
                volume: -12 // Quieter and softer
            }).connect(reverb);

            // Define the 4-bar musical sequence (4 seconds total at 120 BPM)
            // This is the core 'Thanks to You' inspired melodic phrase that will loop.
            const notes = [
                // Bar 1: Ascending/Building Love
                { time: "0:0:0", note: "C4", duration: "4n" },
                { time: "0:1:0", note: "E4", duration: "4n" },
                { time: "0:2:0", note: "G4", duration: "4n" },
                { time: "0:3:0", note: "A4", duration: "4n" },

                // Bar 2: Expressive Melody
                { time: "1:0:0", note: "G4", duration: "4n" },
                { time: "1:1:0", note: "F4", duration: "4n" },
                { time: "1:2:0", note: "E4", duration: "4n" },
                { time: "1:3:0", note: "D4", duration: "4n" },

                // Bar 3: Return and Stability
                { time: "2:0:0", note: "C4", duration: "4n" },
                { time: "2:1:0", note: "E4", duration: "4n" },
                { time: "2:2:0", note: "G4", duration: "4n" },
                { time: "2:3:0", note: "F4", duration: "4n" },
                
                // Bar 4: Resolution (Sustained)
                { time: "3:0:0", note: "C4", duration: "1n" }
            ];

            // Create a Tone.Part to handle the looping of the notes
            const part = new Tone.Part((time, value) => {
                synth.triggerAttackRelease(value.note, value.duration, time);
            }, notes).start(0);

            // Set the loop to repeat every 4 measures (which is 4 seconds at 120 BPM)
            part.loop = true;
            part.loopEnd = "4m"; // Loop duration is 4 measures

            // Start the global transport clock
            Tone.Transport.start();

            // Stop the music after 16 seconds (4 loop repetitions)
            setTimeout(() => {
                Tone.Transport.stop();
                part.dispose();
                synth.dispose();
                reverb.dispose();
            }, 16000); 
        }
        
        // Function to launch the confetti and falling flowers
        function launchConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#FFC0CB', '#FF69B4', '#EE82EE', '#F08080']; // Pink colors

            // Generate 100 pieces of confetti/flowers/hearts
            for (let i = 0; i < 100; i++) {
                const piece = document.createElement('div');
                piece.classList.add('confetti-piece');
                
                // Random starting position (x) and start off-screen above (y)
                const startX = (Math.random() * 100) + 'vw';
                const startY = (Math.random() * -50) + 'vh'; 

                // Random ending position (x-end) for a wide spread
                const endX = (Math.random() * 200 - 50) + 'vw'; 
                
                // Random shape/icon for variety
                if (Math.random() < 0.3) {
                    // Lucide Flower
                    piece.innerHTML = '<i data-lucide="flower" class="w-4 h-4 text-current"></i>';
                    piece.style.width = '16px';
                    piece.style.height = '16px';
                    piece.style.backgroundColor = 'transparent';
                } else if (Math.random() < 0.6) {
                    // Lucide Heart
                    piece.innerHTML = '<i data-lucide="heart" class="w-3 h-3 fill-current text-current"></i>';
                    piece.style.width = '12px';
                    piece.style.height = '12px';
                    piece.style.backgroundColor = 'transparent';
                } else {
                    // Simple Confetti Piece (Square or Circle)
                    piece.style.width = Math.random() > 0.5 ? '12px' : '8px';
                    piece.style.height = Math.random() > 0.5 ? '4px' : '8px';
                    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
                    piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                }

                // Apply CSS variables for the falling animation
                piece.style.setProperty('--x', startX);
                piece.style.setProperty('--y', startY);
                piece.style.setProperty('--x-end', endX);

                // Randomize animation duration and delay
                piece.style.animationDuration = (Math.random() * 3 + 4) + 's';
                piece.style.animationDelay = (Math.random() * 0.5) + 's';

                // Set a random color for the piece (if it's an icon, it sets the text color)
                if (piece.style.backgroundColor === 'transparent') {
                    piece.style.color = colors[Math.floor(Math.random() * colors.length)];
                }
                
                container.appendChild(piece);
            }
            
            // Re-initialize all Lucide icons (including the newly created ones)
            lucide.createIcons();
            
            // The cleanup timeout has been removed. The CSS animation 'fall' is now set to 'infinite'
            // which causes the elements to restart their fall from the top once they exit the screen.
        }

        // Function to handle the transition from the entrance to the greeting
        function showGreeting() {
            const entranceScreen = document.getElementById('entrance-screen');
            const greetingScreen = document.getElementById('greeting-screen');
            const body = document.body;
            
            // 1. Launch the music and the nonstop confetti/flowers immediately!
            playSurpriseMusic();
            launchConfetti();

            // 2. Start transition effect (smooth hiding)
            entranceScreen.style.opacity = '0';
            
            // 3. Wait for the fade-out to complete (200ms)
            setTimeout(() => {
                entranceScreen.classList.add('hidden');
                
                // 4. Change background color slightly for a visual shift
                body.style.backgroundColor = '#f8bbd0'; 

                // 5. Show the greeting screen
                greetingScreen.classList.remove('hidden');

                // 6. Scroll to the top if the page was scrolled
                window.scrollTo({ top: 0, behavior: 'smooth' });

            }, 200);
        }
    </script>
</body>
</html>
